#!/usr/bin/env ruby
# encoding: UTF-8

BEGIN {
    unless ARGV[0] || ENV["INIQUITY_SYSTEM"]
        abort "Please set the INIQUITY_SYSTEM environment variable."
    end
}

HOME = ARGV[0] || ENV["INIQUITY_SYSTEM"]
ENV["INIQUITY_SYSTEM"] = HOME

require "inifile"
require "socksify"
require "github_api"
require "json"

puts "\nipm - The Iniquity Package Manager.\n\n"

packages = Github.repos.list user: 'iniquitybbs'

iq = []

packages.each do |package|
    if package.name.match(/^iq/)
        iq.push(package.name)
        puts package.name
    end
end

puts "\n#{iq.length} total packages available.\n\n"

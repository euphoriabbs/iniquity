#!/usr/bin/env ruby
# encoding: UTF-8

BEGIN {
    unless ARGV[0] || ENV["INIQUITY_SYSTEM"]
        abort "Please set the INIQUITY_SYSTEM environment variable."
    end
}

HOME = ARGV[0] || ENV["INIQUITY_SYSTEM"]
ENV["INIQUITY_SYSTEM"] = HOME

require "inifile"
require "socksify"
require "github_api"
require "json"

puts "\nipm - The Iniquity Package Manager.\n\n"

repositories = Github.repos.list user: "iniquitybbs"

packages = []

repositories.each do |repo|
    if repo.name.match(/^ip/)
        puts repo.name
        packages.push(repo.name_full)
    end
end

puts "\nTotal packages: #{packages.length}\n\n"
